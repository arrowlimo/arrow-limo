{
  "form": "T2",
  "description": "T2 Corporation Income Tax Return - Arrow Limousine & Sedan Services Ltd",
  "note": "This is a DRAFT mapping for T2. Corporate tax returns are complex and require professional review.",
  "warning": "DO NOT submit to CRA without review by a qualified accountant or tax professional.",
  "accounts_used": {
    "revenue": ["4000 Limousine Service Income", "4300 Gratuity Income", "4800 Other Income"],
    "expenses": ["Account pattern 5xxx and 6xxx"],
    "assets": ["Account pattern 1xxx"],
    "liabilities": ["Account pattern 2xxx"],
    "equity": ["Account pattern 3xxx"]
  },
  "sections": {
    "identification": {
      "BusinessNumber_RC1": {
        "description": "Business Number (first part)",
        "value": "MANUAL_ENTRY_REQUIRED",
        "note": "Enter your 9-digit BN"
      },
      "TaxYear_Start": {
        "description": "Tax year start date",
        "sql": "SELECT '{period_start}'::date"
      },
      "TaxYear_End": {
        "description": "Tax year end date",
        "sql": "SELECT '{period_end}'::date"
      }
    },
    "page3_net_income": {
      "Amount_300": {
        "description": "Line 300 - Net income (loss) before adjustments",
        "sql": "SELECT ROUND(COALESCE(SUM(COALESCE(credit,0) - COALESCE(debit,0)),0),2) FROM general_ledger WHERE (account LIKE '4%') AND date BETWEEN '{period_start}' AND '{period_end}'"
      },
      "Amount_311": {
        "description": "Line 311 - Cost of sales",
        "sql": "SELECT ROUND(COALESCE(SUM(COALESCE(debit,0) - COALESCE(credit,0)),0),2) FROM general_ledger WHERE (account LIKE '5%' AND account ILIKE '%cost%') AND date BETWEEN '{period_start}' AND '{period_end}'"
      },
      "Amount_312": {
        "description": "Line 312 - Gross profit",
        "formula": "Amount_300 - Amount_311"
      }
    }
  },
  "todo": [
    "Map all income statement lines (300-360)",
    "Map balance sheet sections (assets, liabilities, equity)",
    "Map tax calculation pages",
    "Add schedules (depreciation, dividends, etc.)",
    "Implement multi-year comparison",
    "Add automated CCA (Capital Cost Allowance) calculations"
  ],
  "disclaimer": "This is an automated draft. T2 returns require professional tax advice and CRA compliance review."
}
